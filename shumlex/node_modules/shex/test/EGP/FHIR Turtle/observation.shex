PREFIX fhir: <http://hl7.org/fhir/> 
PREFIX xsd: <http://www.w3.org/2001/XMLSchema#> 
BASE <http://hl7.org/fhir/shape/>

start=<Observation>


<Observation> {	a [fhir:Observation],
	fhir:nodeRole [fhir:treeRoot],
	fhir:Resource.id @<id>?,
	fhir:Resource.meta @<Meta>?,
	fhir:Resource.implicitRules @<uri>?,
	fhir:Resource.language @<code>?,
	fhir:DomainResource.text @<Narrative>?,
	fhir:DomainResource.contained @<Resource>*,
	fhir:DomainResource.extension @<Extension>*,
	fhir:DomainResource.modifierExtension @<Extension>*,
	fhir:Observation.identifier @<Identifier>*,
	fhir:Observation.status @<code>?,
	fhir:Observation.category @<CodeableConcept>?,
	fhir:Observation.code @<CodeableConcept>?,
	fhir:Observation.subject 	(
		@<PatientReference> OR
		@<GroupReference> OR
		@<DeviceReference> OR
		@<LocationReference>
	)?,
	fhir:Observation.encounter @<EncounterReference>?,
	(	fhir:Observation.effectiveDateTime @<dateTime> |
		fhir:Observation.effectivePeriod @<Period>
	)?,
	fhir:Observation.issued @<instant>?,
	fhir:Observation.performer 	(
		@<PractitionerReference> OR
		@<OrganizationReference> OR
		@<PatientReference> OR
		@<RelatedPersonReference>
	)*,
	(	fhir:Observation.valueQuantity @<Quantity> |
		fhir:Observation.valueCodeableConcept @<CodeableConcept> |
		fhir:Observation.valueString @<string> |
		fhir:Observation.valueRange @<Range> |
		fhir:Observation.valueRatio @<Ratio> |
		fhir:Observation.valueSampledData @<SampledData> |
		fhir:Observation.valueAttachment @<Attachment> |
		fhir:Observation.valueTime @<time> |
		fhir:Observation.valueDateTime @<dateTime> |
		fhir:Observation.valuePeriod @<Period>
	)?,
	fhir:Observation.dataAbsentReason @<CodeableConcept>?,
	fhir:Observation.interpretation @<CodeableConcept>?,
	fhir:Observation.comment @<string>?,
	fhir:Observation.bodySite @<CodeableConcept>?,
	fhir:Observation.method @<CodeableConcept>?,
	fhir:Observation.specimen @<SpecimenReference>?,
	fhir:Observation.device 	(
		@<DeviceReference> OR
		@<DeviceMetricReference>
	)?,
	fhir:Observation.referenceRange @<Observation.referenceRange>*,
	fhir:Observation.related @<Observation.related>*,
	fhir:Observation.component @<Observation.component>*,
	fhir:index xsd:integer?
}

<Observation.referenceRange> {fhir:Element.id @<id>?,
	fhir:Element.extension @<Extension>*,
	fhir:BackboneElement.modifierExtension @<Extension>*,
	fhir:Observation.referenceRange.low @<uri>?,
	fhir:Observation.referenceRange.high @<uri>?,
	fhir:Observation.referenceRange.meaning @<CodeableConcept>?,
	fhir:Observation.referenceRange.age @<Range>?,
	fhir:Observation.referenceRange.text @<string>?,
	fhir:index xsd:integer?
}

<Observation.related> {fhir:Element.id @<id>?,
	fhir:Element.extension @<Extension>*,
	fhir:BackboneElement.modifierExtension @<Extension>*,
	fhir:Observation.related.type @<code>?,
	fhir:Observation.related.target 	(
		@<ObservationReference> OR
		@<QuestionnaireResponseReference>
	)?,
	fhir:index xsd:integer?
}

<Observation.component> {fhir:Element.id @<id>?,
	fhir:Element.extension @<Extension>*,
	fhir:BackboneElement.modifierExtension @<Extension>*,
	fhir:Observation.component.code @<CodeableConcept>?,
	(	fhir:Observation.component.valueQuantity @<Quantity> |
		fhir:Observation.component.valueCodeableConcept @<CodeableConcept> |
		fhir:Observation.component.valueString @<string> |
		fhir:Observation.component.valueRange @<Range> |
		fhir:Observation.component.valueRatio @<Ratio> |
		fhir:Observation.component.valueSampledData @<SampledData> |
		fhir:Observation.component.valueAttachment @<Attachment> |
		fhir:Observation.component.valueTime @<time> |
		fhir:Observation.component.valueDateTime @<dateTime> |
		fhir:Observation.component.valuePeriod @<Period>
	)?,
	fhir:Observation.component.dataAbsentReason @<CodeableConcept>?,
	fhir:Observation.component.interpretation @<CodeableConcept>?,
	fhir:Observation.component.referenceRange @<Observation.referenceRange>*,
	fhir:index xsd:integer?
}

#---------------------- Data Types -------------------

<dateTime> {fhir:id @<id>?,
	fhir:extension @<Extension>*,
	fhir:value xsd:gYear OR xsd:gYearMonth OR xsd:date OR xsd:dateTime?,
	fhir:index xsd:integer?
}

<Meta> {fhir:Element.id @<id>?,
	fhir:Element.extension @<Extension>*,
	fhir:Meta.versionId @<id>?,
	fhir:Meta.lastUpdated @<instant>?,
	fhir:Meta.profile @<uri>*,
	fhir:Meta.security @<Coding>*,
	fhir:Meta.tag @<Coding>*,
	fhir:index xsd:integer?
}

<code> {fhir:extension @<Extension>*,
	fhir:value xsd:string?,
	fhir:index xsd:integer?
}

<string> {fhir:id @<id>?,
	fhir:extension @<Extension>*,
	fhir:value xsd:string?,
	fhir:index xsd:integer?
}

<Resource> {	a [fhir:Resource],
	fhir:nodeRole [fhir:treeRoot],
	fhir:Resource.id @<id>?,
	fhir:Resource.meta @<Meta>?,
	fhir:Resource.implicitRules @<uri>?,
	fhir:Resource.language @<code>?,
	fhir:index xsd:integer?
}

<Period> {fhir:Element.id @<id>?,
	fhir:Element.extension @<Extension>*,
	fhir:Period.start @<dateTime>?,
	fhir:Period.end @<dateTime>?,
	fhir:index xsd:integer?
}

<Quantity> {fhir:Element.id @<id>?,
	fhir:Element.extension @<Extension>*,
	fhir:Quantity.value @<decimal>?,
	fhir:Quantity.comparator @<code>?,
	fhir:Quantity.unit @<string>?,
	fhir:Quantity.system @<uri>?,
	fhir:Quantity.code @<code>?,
	fhir:index xsd:integer?
}

<Attachment> {fhir:Element.id @<id>?,
	fhir:Element.extension @<Extension>*,
	fhir:Attachment.contentType @<code>?,
	fhir:Attachment.language @<code>?,
	fhir:Attachment.data @<base64Binary>?,
	fhir:Attachment.url @<uri>?,
	fhir:Attachment.size @<unsignedInt>?,
	fhir:Attachment.hash @<base64Binary>?,
	fhir:Attachment.title @<string>?,
	fhir:Attachment.creation @<dateTime>?,
	fhir:index xsd:integer?
}

<Range> {fhir:Element.id @<id>?,
	fhir:Element.extension @<Extension>*,
	fhir:Range.low @<uri>?,
	fhir:Range.high @<uri>?,
	fhir:index xsd:integer?
}

<uri> {fhir:id @<id>?,
	fhir:extension @<Extension>*,
	fhir:value IRI?,
	fhir:index xsd:integer?
}

<instant> {fhir:id @<id>?,
	fhir:extension @<Extension>*,
	fhir:value xsd:dateTime?,
	fhir:index xsd:integer?
}

<Extension> {fhir:Element.id @<id>?,
	fhir:Element.extension @<Extension>*,
	fhir:Extension.url @<uri>?,
	(	fhir:Extension.valueBoolean @<boolean> |
		fhir:Extension.valueInteger @<integer> |
		fhir:Extension.valueDecimal @<decimal> |
		fhir:Extension.valueBase64Binary @<base64Binary> |
		fhir:Extension.valueInstant @<instant> |
		fhir:Extension.valueString @<string> |
		fhir:Extension.valueUri @<uri> |
		fhir:Extension.valueDate @<date> |
		fhir:Extension.valueDateTime @<dateTime> |
		fhir:Extension.valueTime @<time> |
		fhir:Extension.valueCode @<code> |
		fhir:Extension.valueOid @<oid> |
		fhir:Extension.valueId @<id> |
		fhir:Extension.valueUnsignedInt @<unsignedInt> |
		fhir:Extension.valuePositiveInt @<positiveInt> |
		fhir:Extension.valueMarkdown @<markdown> |
		fhir:Extension.valueAnnotation @<Annotation> |
		fhir:Extension.valueAttachment @<Attachment> |
		fhir:Extension.valueIdentifier @<Identifier> |
		fhir:Extension.valueCodeableConcept @<CodeableConcept> |
		fhir:Extension.valueCoding @<Coding> |
		fhir:Extension.valueQuantity @<Quantity> |
		fhir:Extension.valueRange @<Range> |
		fhir:Extension.valuePeriod @<Period> |
		fhir:Extension.valueRatio @<Ratio> |
		fhir:Extension.valueSampledData @<SampledData> |
		fhir:Extension.valueSignature @<Signature> |
		fhir:Extension.valueHumanName @<HumanName> |
		fhir:Extension.valueAddress @<Address> |
		fhir:Extension.valueContactPoint @<ContactPoint> |
		fhir:Extension.valueTiming @<Timing> |
		fhir:Extension.value @<Reference> |
		fhir:Extension.valueMeta @<Meta>
	)?,
	fhir:index xsd:integer?
}

<date> {fhir:id @<id>?,
	fhir:extension @<Extension>*,
	fhir:value xsd:gYear OR xsd:gYearMonth OR xsd:date?,
	fhir:index xsd:integer?
}

<Address> {fhir:Element.id @<id>?,
	fhir:Element.extension @<Extension>*,
	fhir:Address.use @<code>?,
	fhir:Address.type @<code>?,
	fhir:Address.text @<string>?,
	fhir:Address.line @<string>*,
	fhir:Address.city @<string>?,
	fhir:Address.district @<string>?,
	fhir:Address.state @<string>?,
	fhir:Address.postalCode @<string>?,
	fhir:Address.country @<string>?,
	fhir:Address.period @<Period>?,
	fhir:index xsd:integer?
}

<integer> {fhir:id @<id>?,
	fhir:extension @<Extension>*,
	fhir:value xsd:int?,
	fhir:index xsd:integer?
}

<oid> {fhir:extension @<Extension>*,
	fhir:value IRI?,
	fhir:index xsd:integer?
}

<HumanName> {fhir:Element.id @<id>?,
	fhir:Element.extension @<Extension>*,
	fhir:HumanName.use @<code>?,
	fhir:HumanName.text @<string>?,
	fhir:HumanName.family @<string>*,
	fhir:HumanName.given @<string>*,
	fhir:HumanName.prefix @<string>*,
	fhir:HumanName.suffix @<string>*,
	fhir:HumanName.period @<Period>?,
	fhir:index xsd:integer?
}

<ContactPoint> {fhir:Element.id @<id>?,
	fhir:Element.extension @<Extension>*,
	fhir:ContactPoint.system @<code>?,
	fhir:ContactPoint.value @<string>?,
	fhir:ContactPoint.use @<code>?,
	fhir:ContactPoint.rank @<positiveInt>?,
	fhir:ContactPoint.period @<Period>?,
	fhir:index xsd:integer?
}

<Identifier> {fhir:Element.id @<id>?,
	fhir:Element.extension @<Extension>*,
	fhir:Identifier.use @<code>?,
	fhir:Identifier.type @<CodeableConcept>?,
	fhir:Identifier.system @<uri>?,
	fhir:Identifier.value @<string>?,
	fhir:Identifier.period @<Period>?,
	fhir:Identifier.assigner @<OrganizationReference>?,
	fhir:index xsd:integer?
}

<Narrative> {fhir:Element.id @<id>?,
	fhir:Element.extension @<Extension>*,
	fhir:Narrative.status @<code>?,
	fhir:Narrative.div xsd:string?,
	fhir:index xsd:integer?
}

<Coding> {fhir:concept IRI?,
	fhir:Element.id @<id>?,
	fhir:Element.extension @<Extension>*,
	fhir:Coding.system @<uri>?,
	fhir:Coding.version @<string>?,
	fhir:Coding.code @<code>?,
	fhir:Coding.display @<string>?,
	fhir:Coding.userSelected @<boolean>?,
	fhir:index xsd:integer?
}

<SampledData> {fhir:Element.id @<id>?,
	fhir:Element.extension @<Extension>*,
	fhir:SampledData.origin @<uri>?,
	fhir:SampledData.period @<decimal>?,
	fhir:SampledData.factor @<decimal>?,
	fhir:SampledData.lowerLimit @<decimal>?,
	fhir:SampledData.upperLimit @<decimal>?,
	fhir:SampledData.dimensions @<positiveInt>?,
	fhir:SampledData.data @<string>?,
	fhir:index xsd:integer?
}

<markdown> {fhir:extension @<Extension>*,
	fhir:value xsd:string?,
	fhir:index xsd:integer?
}

<Ratio> {fhir:Element.id @<id>?,
	fhir:Element.extension @<Extension>*,
	fhir:Ratio.numerator @<Quantity>?,
	fhir:Ratio.denominator @<Quantity>?,
	fhir:index xsd:integer?
}

<id> {fhir:extension @<Extension>*,
	fhir:value xsd:string?,
	fhir:index xsd:integer?
}

<positiveInt> {fhir:extension @<Extension>*,
	fhir:value xsd:positiveInteger?,
	fhir:index xsd:integer?
}

<Annotation> {fhir:Element.id @<id>?,
	fhir:Element.extension @<Extension>*,
	(	fhir:Annotation.authorPractitioner @<PractitionerReference> |
		fhir:Annotation.authorPatient @<PatientReference> |
		fhir:Annotation.authorRelatedPerson @<RelatedPersonReference> |
		fhir:Annotation.authorString @<string>
	)?,
	fhir:Annotation.time @<dateTime>?,
	fhir:Annotation.text @<string>?,
	fhir:index xsd:integer?
}

<boolean> {fhir:id @<id>?,
	fhir:extension @<Extension>*,
	fhir:value xsd:boolean?,
	fhir:index xsd:integer?
}

<base64Binary> {fhir:id @<id>?,
	fhir:extension @<Extension>*,
	fhir:value xsd:base64Binary?,
	fhir:index xsd:integer?
}

<Signature> {fhir:Element.id @<id>?,
	fhir:Element.extension @<Extension>*,
	fhir:Signature.type @<Coding>+,
	fhir:Signature.when @<instant>?,
	(	fhir:Signature.whoUri @<uri> |
		fhir:Signature.whoPractitioner @<PractitionerReference> |
		fhir:Signature.whoRelatedPerson @<RelatedPersonReference> |
		fhir:Signature.whoPatient @<PatientReference> |
		fhir:Signature.whoDevice @<DeviceReference> |
		fhir:Signature.whoOrganization @<OrganizationReference>
	)?,
	fhir:Signature.contentType @<code>?,
	fhir:Signature.blob @<base64Binary>?,
	fhir:index xsd:integer?
}

<unsignedInt> {fhir:extension @<Extension>*,
	fhir:value xsd:nonNegativeInteger?,
	fhir:index xsd:integer?
}

<time> {fhir:id @<id>?,
	fhir:extension @<Extension>*,
	fhir:value xsd:time?,
	fhir:index xsd:integer?
}

<Timing> {fhir:Element.id @<id>?,
	fhir:Element.extension @<Extension>*,
	fhir:Timing.event @<dateTime>*,
	fhir:Timing.repeat @<Timing.repeat>?,
	fhir:Timing.code @<CodeableConcept>?,
	fhir:index xsd:integer?
}

<decimal> {fhir:id @<id>?,
	fhir:extension @<Extension>*,
	fhir:value xsd:decimal?,
	fhir:index xsd:integer?
}

<CodeableConcept> {fhir:Element.id @<id>?,
	fhir:Element.extension @<Extension>*,
	fhir:CodeableConcept.coding @<Coding>*,
	fhir:CodeableConcept.text @<string>?,
	fhir:index xsd:integer?
}

<Timing.repeat> {fhir:Element.id @<id>?,
	fhir:Element.extension @<Extension>*,
	(	fhir:Timing.repeat.boundsQuantity @<uri> |
		fhir:Timing.repeat.boundsRange @<Range> |
		fhir:Timing.repeat.boundsPeriod @<Period>
	)?,
	fhir:Timing.repeat.count @<integer>?,
	fhir:Timing.repeat.countMax @<integer>?,
	fhir:Timing.repeat.duration @<decimal>?,
	fhir:Timing.repeat.durationMax @<decimal>?,
	fhir:Timing.repeat.durationUnit @<code>?,
	fhir:Timing.repeat.frequency @<integer>?,
	fhir:Timing.repeat.frequencyMax @<integer>?,
	fhir:Timing.repeat.period @<decimal>?,
	fhir:Timing.repeat.periodMax @<decimal>?,
	fhir:Timing.repeat.periodUnit @<code>?,
	fhir:Timing.repeat.when @<code>?,
	fhir:Timing.repeat.offset @<unsignedInt>?,
	fhir:index xsd:integer?
}

<Reference> {
	a [fhir:Reference]?,
	fhir:Element.id @<id>?,
	fhir:Element.extension @<Extension>*,
	fhir:link IRI?,
	fhir:Reference.reference @<string>?,
	fhir:Reference.display @<string>?,
	fhir:index xsd:integer?
}

<GroupReference> {
	a [fhir:GroupReference]?,
	fhir:Element.id @<id>?,
	fhir:Element.extension @<Extension>*,
	fhir:link IRI?,
	fhir:Reference.reference @<string>?,
	fhir:Reference.display @<string>?,
	fhir:index xsd:integer?
}

<OrganizationReference> {
	a [fhir:OrganizationReference]?,
	fhir:Element.id @<id>?,
	fhir:Element.extension @<Extension>*,
	fhir:link IRI?,
	fhir:Reference.reference @<string>?,
	fhir:Reference.display @<string>?,
	fhir:index xsd:integer?
}

<DeviceReference> {
	a [fhir:DeviceReference]?,
	fhir:Element.id @<id>?,
	fhir:Element.extension @<Extension>*,
	fhir:link IRI?,
	fhir:Reference.reference @<string>?,
	fhir:Reference.display @<string>?,
	fhir:index xsd:integer?
}

<PatientReference> {
	a [fhir:PatientReference]?,
	fhir:Element.id @<id>?,
	fhir:Element.extension @<Extension>*,
	fhir:link IRI?,
	fhir:Reference.reference @<string>?,
	fhir:Reference.display @<string>?,
	fhir:index xsd:integer?
}

<DeviceMetricReference> {
	a [fhir:DeviceMetricReference]?,
	fhir:Element.id @<id>?,
	fhir:Element.extension @<Extension>*,
	fhir:link IRI?,
	fhir:Reference.reference @<string>?,
	fhir:Reference.display @<string>?,
	fhir:index xsd:integer?
}

<QuestionnaireResponseReference> {
	a [fhir:QuestionnaireResponseReference]?,
	fhir:Element.id @<id>?,
	fhir:Element.extension @<Extension>*,
	fhir:link IRI?,
	fhir:Reference.reference @<string>?,
	fhir:Reference.display @<string>?,
	fhir:index xsd:integer?
}

<RelatedPersonReference> {
	a [fhir:RelatedPersonReference]?,
	fhir:Element.id @<id>?,
	fhir:Element.extension @<Extension>*,
	fhir:link IRI?,
	fhir:Reference.reference @<string>?,
	fhir:Reference.display @<string>?,
	fhir:index xsd:integer?
}

<PractitionerReference> {
	a [fhir:PractitionerReference]?,
	fhir:Element.id @<id>?,
	fhir:Element.extension @<Extension>*,
	fhir:link IRI?,
	fhir:Reference.reference @<string>?,
	fhir:Reference.display @<string>?,
	fhir:index xsd:integer?
}

<SpecimenReference> {
	a [fhir:SpecimenReference]?,
	fhir:Element.id @<id>?,
	fhir:Element.extension @<Extension>*,
	fhir:link IRI?,
	fhir:Reference.reference @<string>?,
	fhir:Reference.display @<string>?,
	fhir:index xsd:integer?
}

<ObservationReference> {
	a [fhir:ObservationReference]?,
	fhir:Element.id @<id>?,
	fhir:Element.extension @<Extension>*,
	fhir:link IRI?,
	fhir:Reference.reference @<string>?,
	fhir:Reference.display @<string>?,
	fhir:index xsd:integer?
}

<EncounterReference> {
	a [fhir:EncounterReference]?,
	fhir:Element.id @<id>?,
	fhir:Element.extension @<Extension>*,
	fhir:link IRI?,
	fhir:Reference.reference @<string>?,
	fhir:Reference.display @<string>?,
	fhir:index xsd:integer?
}

<LocationReference> {
	a [fhir:LocationReference]?,
	fhir:Element.id @<id>?,
	fhir:Element.extension @<Extension>*,
	fhir:link IRI?,
	fhir:Reference.reference @<string>?,
	fhir:Reference.display @<string>?,
	fhir:index xsd:integer?
}
